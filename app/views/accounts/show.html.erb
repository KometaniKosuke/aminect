<table style="width: 90%; font-size: 16px; margin: 3% auto auto auto; text-align: center;" align="center">
  <tr>
    <td width="40%" rowspan="2">
      <%= image_tag @user.image.url, class: 'rounded-circle', size: '128x128' %>
    </td>
    <td class="name" colspan="2"><%= @user.name %></td>
  </tr>
  <tr height="0">
    <td width="30%">
      <%= link_to @user.followers.count, :followers_account %><br>フォロワー
    </td>
    <td width="30%">
      <%= link_to @user.followings.count, :followings_account %><br>フォロー
    </td>
  </tr>
</table>

<table style="width: 90%; font-size: 20px; text-align: center;" align="center">
  <tr>
    <td>
      <p style="padding: 5px; display: inline-block; background-color: #D9D9D9; border-radius: 4px;">
        <%= @user.undergraduate %> <%= @user.grade %>年
      </p>
    </td>
    <td>
      <p style="padding: 5px; display: inline-block; background-color: #D9D9D9; border-radius: 4px;">
        <%= @user.birthplace %>
      </p>
    </td>
    <td>
      <p style="padding: 5px; display: inline-block; background-color: #D9D9D9; border-radius: 4px;">
        <% if @user.sex==1 %>男性
        <% elsif @user.sex==2 %>女性
        <% else %>—
        <% end %>
      </p>
    </td>
  </tr>
</table>

<p align="center"><%= safe_join(@user.comment.split("\n"),tag(:br)) %></p>
<br>

<p align="center">
  <% if @user.twitter.present? %>
    <% tw = 'https://twitter.com/'.concat(@user.twitter) %>
    <%= link_to image_tag("Twitter_logo.png", size:"86x86"),tw, style: "padding:0 7%;" %>
  <% end %>
  <% if @user.instagram.present? %>
    <% i = 'https://www.instagram.com/'.concat(@user.instagram) %>
    <%= link_to image_tag("Instagram_logo.png", size:"86x86"),i, style: "padding:0 7%;"%>
  <% end %>
</p>

<br>

<p>
  <%= button_to "プロフィールを編集する", :edit_account, {method: :get, class: "pro-btn"} %>
  <%= button_to "質問箱", :new_request, {method: :get, class: "req-btn"} %>
</p>
<br>

<p style="width: 90%; margin: auto;" align="center">
  <% @tags.each do |tag| %>
    <span style="margin: auto 5px auto 5px; white-space: nowrap; color: #007AFF;">#<%= tag.name %></span>
  <% end %>
  <%= button_to "タグ編集", :new_account_tag, {method: :get} %>
</p>

<div class="timetable" align=center>
  <%= link_to edit_account_timetable_path(@timetable.id), {method: :get, class: "edit_img"} do %>
    <h3>時間割 <%= image_tag("edit.png", size: "15x15") %></h3>
  <% end %>
  <% if @timetable.timetable_img.present? %>
    <%= image_tag @timetable.timetable_img.url, style: "width: 84%; margin-left: 8%" %>
  <% else %>
    <%= render "shared/timetable" %>
  <% end %>
</div>
<br>

<% num = @posts.count/2 %>
<% if @posts.count%2 == 0 %> <!-- 投稿が偶数 -->
  <table align="center"  style="width:84%;">
    <% for i in 1..num %>
      <tr>
        <td style="width: 50%;">
          <% a = @posts.limit(i*2-1).last %>
          <% modal_a = "modal_a"+i.to_s %>
          <%= render partial: "post_modal", :locals=>{:modal_id => modal_a, :modal_post => a} %>
        </td>
        <td style="width: 50%;">
          <% b = @posts.limit(i*2).last %>
          <% modal_b = "modal_b"+i.to_s %>
          <%= render partial: "post_modal", :locals=>{:modal_id => modal_b, :modal_post => b} %>
        </td>
      </tr>
    <% end %>
  </table>
<% else %> <!-- 投稿が奇数 -->
  <% if @posts.count!=1 %>
    <table align="center"  style="width:84%;">
      <% for i in 1..num %>
        <tr>
          <td style="width: 50%;">
            <% a = @posts.limit(i*2-1).last %>
            <% modal_a = "modal_a"+i.to_s %>
            <%= render partial: "post_modal", :locals=>{:modal_id => modal_a, :modal_post => a} %>
          </td>
          <td style="width: 50%;">
            <% b = @posts.limit(i*2).last %>
            <% modal_b = "modal_b"+i.to_s %>
            <%= render partial: "post_modal", :locals=>{:modal_id => modal_b, :modal_post => b} %>
          </td>
        </tr>
      <% end %>
      <tr>
        <td style="width: 50%;">
          <% c = @posts.last %>
          <% modal_c = "modal_c"+i.to_s %>
          <%= render partial: "post_modal", :locals=>{:modal_id => modal_c, :modal_post => c} %>
        </td>
      </tr>
    </table>
  <% else %>
    <table style="width:42%; margin-left: 8%">
      <tr>
        <td style="width: 50%;">
          <% a = @posts.last %>
          <% modal_a = "modal_a"+i.to_s %>
          <%= render partial: "post_modal", :locals=>{:modal_id => modal_a, :modal_post => a} %>
        </td>
      </tr>
    </table>
  <% end %>
<% end %>
<br><br><br><br>
